(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

/**
 * Created by movsessaponjyan on 4/14/18.
 */

angular.module("app", ['ngAnimate', 'ngResource', 'ngCookies', 'ngMaterial', 'ngMessages']).factory('question', function ($resource) {
    return $resource("/v1/api/questions", {}, {
        getAll: { method: 'GET', isArray: true },
        setAnswer: { method: 'POST' }
    });
}).factory('user', function ($resource) {
    return $resource("/v1/api/:type", {}, {
        getUserInfo: { method: 'GET', params: { type: 'user' } },
        getAllUser: { method: 'GET', params: { type: 'users' }, isArray: true }
    });
}).factory('hero', function ($resource) {
    return $resource("/v1/api/:type", {}, {
        getHeroInfo: { method: 'GET', params: { type: "hero" } },
        getHeroLeaderInfo: { method: 'GET', params: { type: "heros" }, isArray: true }
    });
}).controller("mainCtrl", function ($scope, $timeout, question, user, hero, $cookies) {

    $scope.selectAnswer = null;

    $scope.changePages = function () {
        $scope.homePage = false;
        $scope.rulesPage = false;
        $scope.votePage = false;
        $scope.leaderboardPage = false;
    };
    $scope.changePages($scope.homePage);

    $scope.homePage = true;

    $scope.guessPageAction = function () {
        $scope.changePages();
        $timeout(function () {
            $scope.rulesPage = true;

            $timeout(function () {
                jQuery(document).ready(function ($) {
                    $(function () {
                        $('.write-text').typewriter({
                            sound: true,
                            cursorVisible: false,
                            cursorColor: "#551A8B",
                            randomTypeSpeed: true
                        });
                    });
                });
            }, 400);
        }, 1000);
    };

    $timeout(function () {
        $scope.guessPageAction();
    }, 2500);

    $scope.setAnswer = function (answer) {
        $scope.selectAnswer = answer;
    };

    $scope.approveAnswer = function () {

        if ($scope.selectAnswer != null) {
            console.log($scope.selectAnswer);

            question.setAnswer({}, { _id: $scope.questions[$scope.questionKey][0]._id, option: $scope.selectAnswer }, function (response) {
                $scope.selectAnswer = null;
                $scope.questionKey++;
                if ($scope.questionKey > 4) {
                    $scope.leaderboardPageAction();
                }
            });
        } else {
            console.log("Choose");
        }
    };

    $scope.votePageAction = function () {

        hero.getHeroInfo({}, {}, function (response) {
            $scope.hero = response;
            user.getUserInfo({}, {}, function (response) {
                $cookies.put("_id", response._id);

                $scope.changePages();
                $scope.questionKey = 0;

                question.getAll({}, {}, function (response) {
                    console.log(response);
                    $scope.questions = response;
                });

                $timeout(function () {
                    $scope.votePage = true;
                }, 1000);
            });
        });
    };

    $scope.leaderboardPageAction = function () {
        $scope.changePages();

        user.getAllUser({}, {}, function (response) {
            console.log(response);
            $scope.userList = response;
        });

        $timeout(function () {
            $scope.leaderboardPage = true;
        }, 1000);
    };

    $scope.leaderboardHeroPageAction = function () {
        $scope.changePages();

        hero.getHeroLeaderInfo({}, {}, function (response) {
            $scope.userList = response;

            angular.forEach($scope.userList, function (data) {
                data.score = data.heroScore;
            });
        });

        $timeout(function () {
            $scope.leaderboardPage = true;
        }, 1000);
    };

    // $scope.votePageAction(); //tmp

});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBS0EsUUFDSyxNQURMLENBQ1ksS0FEWixFQUNrQixDQUFDLFdBQUQsRUFBYSxZQUFiLEVBQTBCLFdBQTFCLEVBQXNDLFlBQXRDLEVBQW1ELFlBQW5ELENBRGxCLEVBRUssT0FGTCxDQUVhLFVBRmIsRUFFeUIsVUFBVSxTQUFWLEVBQXFCO0FBQ3RDLFdBQU8sVUFBVSxtQkFBVixFQUE4QixFQUE5QixFQUFpQztBQUNwQyxnQkFBUSxFQUFDLFFBQVEsS0FBVCxFQUFlLFNBQVEsSUFBdkIsRUFENEI7QUFFcEMsbUJBQVcsRUFBQyxRQUFRLE1BQVQ7QUFGeUIsS0FBakMsQ0FBUDtBQUlILENBUEwsRUFRSyxPQVJMLENBUWEsTUFSYixFQVFxQixVQUFVLFNBQVYsRUFBcUI7QUFDbEMsV0FBTyxVQUFVLGVBQVYsRUFBMEIsRUFBMUIsRUFBNkI7QUFDaEMscUJBQWEsRUFBQyxRQUFRLEtBQVQsRUFBZSxRQUFPLEVBQUMsTUFBSyxNQUFOLEVBQXRCLEVBRG1CO0FBRWhDLG9CQUFZLEVBQUMsUUFBUSxLQUFULEVBQWUsUUFBTyxFQUFDLE1BQUssT0FBTixFQUF0QixFQUFxQyxTQUFRLElBQTdDO0FBRm9CLEtBQTdCLENBQVA7QUFJSCxDQWJMLEVBY0ssT0FkTCxDQWNhLE1BZGIsRUFjcUIsVUFBVSxTQUFWLEVBQXFCO0FBQ2xDLFdBQU8sVUFBVSxlQUFWLEVBQTBCLEVBQTFCLEVBQTZCO0FBQ2hDLHFCQUFhLEVBQUMsUUFBUSxLQUFULEVBQWUsUUFBTyxFQUFDLE1BQUssTUFBTixFQUF0QixFQURtQjtBQUVoQywyQkFBbUIsRUFBQyxRQUFRLEtBQVQsRUFBZSxRQUFPLEVBQUMsTUFBSyxPQUFOLEVBQXRCLEVBQXFDLFNBQVEsSUFBN0M7QUFGYSxLQUE3QixDQUFQO0FBSUgsQ0FuQkwsRUFvQkss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QUssVUFBTCxDQUFnQixFQUFoQixFQUFtQixFQUFuQixFQUFzQixVQUFVLFFBQVYsRUFBb0I7QUFDdEMsb0JBQVEsR0FBUixDQUFZLFFBQVo7QUFDQSxtQkFBTyxRQUFQLEdBQWtCLFFBQWxCO0FBQ0gsU0FIRDs7QUFLQSxpQkFBUyxZQUFZO0FBQ2pCLG1CQUFPLGVBQVAsR0FBeUIsSUFBekI7QUFDSCxTQUZELEVBRUUsSUFGRjtBQUlILEtBWkQ7O0FBY0EsV0FBTyx5QkFBUCxHQUFtQyxZQUFZO0FBQzNDLGVBQU8sV0FBUDs7QUFFQSxhQUFLLGlCQUFMLENBQXVCLEVBQXZCLEVBQTBCLEVBQTFCLEVBQTZCLFVBQVUsUUFBVixFQUFvQjtBQUM3QyxtQkFBTyxRQUFQLEdBQWtCLFFBQWxCOztBQUVBLG9CQUFRLE9BQVIsQ0FBZ0IsT0FBTyxRQUF2QixFQUFnQyxVQUFVLElBQVYsRUFBZ0I7QUFDNUMscUJBQUssS0FBTCxHQUFhLEtBQUssU0FBbEI7QUFDSCxhQUZEO0FBSUgsU0FQRDs7QUFTQSxpQkFBUyxZQUFZO0FBQ2pCLG1CQUFPLGVBQVAsR0FBeUIsSUFBekI7QUFDSCxTQUZELEVBRUUsSUFGRjtBQUdILEtBZkQ7O0FBaUJBOztBQUlILENBL0lMIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IG1vdnNlc3NhcG9uanlhbiBvbiA0LzE0LzE4LlxuICovXG5cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoXCJhcHBcIixbJ25nQW5pbWF0ZScsJ25nUmVzb3VyY2UnLCduZ0Nvb2tpZXMnLCduZ01hdGVyaWFsJywnbmdNZXNzYWdlcyddKVxuICAgIC5mYWN0b3J5KCdxdWVzdGlvbicsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShcIi92MS9hcGkvcXVlc3Rpb25zXCIse30se1xuICAgICAgICAgICAgZ2V0QWxsOiB7bWV0aG9kOiAnR0VUJyxpc0FycmF5OnRydWV9LFxuICAgICAgICAgICAgc2V0QW5zd2VyOiB7bWV0aG9kOiAnUE9TVCd9XG4gICAgICAgIH0pO1xuICAgIH0pXG4gICAgLmZhY3RvcnkoJ3VzZXInLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoXCIvdjEvYXBpLzp0eXBlXCIse30se1xuICAgICAgICAgICAgZ2V0VXNlckluZm86IHttZXRob2Q6ICdHRVQnLHBhcmFtczp7dHlwZTondXNlcid9fSxcbiAgICAgICAgICAgIGdldEFsbFVzZXI6IHttZXRob2Q6ICdHRVQnLHBhcmFtczp7dHlwZTondXNlcnMnfSxpc0FycmF5OnRydWV9XG4gICAgICAgIH0pO1xuICAgIH0pXG4gICAgLmZhY3RvcnkoJ2hlcm8nLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoXCIvdjEvYXBpLzp0eXBlXCIse30se1xuICAgICAgICAgICAgZ2V0SGVyb0luZm86IHttZXRob2Q6ICdHRVQnLHBhcmFtczp7dHlwZTpcImhlcm9cIn19LFxuICAgICAgICAgICAgZ2V0SGVyb0xlYWRlckluZm86IHttZXRob2Q6ICdHRVQnLHBhcmFtczp7dHlwZTpcImhlcm9zXCJ9LGlzQXJyYXk6dHJ1ZX1cbiAgICAgICAgfSk7XG4gICAgfSlcbiAgICAuY29udHJvbGxlcihcIm1haW5DdHJsXCIsZnVuY3Rpb24gKCRzY29wZSwkdGltZW91dCxxdWVzdGlvbix1c2VyLGhlcm8sJGNvb2tpZXMpIHtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0QW5zd2VyID0gbnVsbDtcblxuICAgICAgICAkc2NvcGUuY2hhbmdlUGFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaG9tZVBhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc1BhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS52b3RlUGFnZSA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmxlYWRlcmJvYXJkUGFnZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuY2hhbmdlUGFnZXMoJHNjb3BlLmhvbWVQYWdlKTtcblxuICAgICAgICAkc2NvcGUuaG9tZVBhZ2UgPSB0cnVlO1xuXG4gICAgICAgICRzY29wZS5ndWVzc1BhZ2VBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlUGFnZXMoKTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucnVsZXNQYWdlID0gdHJ1ZTtcblxuXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoIGRvY3VtZW50ICkucmVhZHkoZnVuY3Rpb24oICQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcud3JpdGUtdGV4dCcpLnR5cGV3cml0ZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VuZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yVmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvckNvbG9yOiBcIiM1NTFBOEJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tVHlwZVNwZWVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSw0MDApO1xuXG4gICAgICAgICAgICB9LDEwMDApO1xuICAgICAgICB9O1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5ndWVzc1BhZ2VBY3Rpb24oKTtcbiAgICAgICAgfSwyNTAwKTtcblxuICAgICAgICAkc2NvcGUuc2V0QW5zd2VyID0gZnVuY3Rpb24gKGFuc3dlcikge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdEFuc3dlciA9IGFuc3dlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYXBwcm92ZUFuc3dlciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgaWYgKCRzY29wZS5zZWxlY3RBbnN3ZXIgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNlbGVjdEFuc3dlcik7XG5cbiAgICAgICAgICAgICAgICBxdWVzdGlvbi5zZXRBbnN3ZXIoe30se19pZDokc2NvcGUucXVlc3Rpb25zWyRzY29wZS5xdWVzdGlvbktleV1bMF0uX2lkLG9wdGlvbjokc2NvcGUuc2VsZWN0QW5zd2VyfSxmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdEFuc3dlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbktleSsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uS2V5ID4gNCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGVhZGVyYm9hcmRQYWdlQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDaG9vc2VcIik7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgJHNjb3BlLnZvdGVQYWdlQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuXG5cbiAgICAgICAgICAgIGhlcm8uZ2V0SGVyb0luZm8oe30se30sZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmhlcm8gPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB1c2VyLmdldFVzZXJJbmZvKHt9LHt9LGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAkY29va2llcy5wdXQoXCJfaWRcIiwgcmVzcG9uc2UuX2lkKTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlUGFnZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uS2V5ID0gMDtcblxuICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbi5nZXRBbGwoe30se30sZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS52b3RlUGFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sMTAwMCk7XG5cblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmxlYWRlcmJvYXJkUGFnZUFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5jaGFuZ2VQYWdlcygpO1xuXG4gICAgICAgICAgICB1c2VyLmdldEFsbFVzZXIoe30se30sZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VyTGlzdCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubGVhZGVyYm9hcmRQYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sMTAwMCk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUubGVhZGVyYm9hcmRIZXJvUGFnZUFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5jaGFuZ2VQYWdlcygpO1xuXG4gICAgICAgICAgICBoZXJvLmdldEhlcm9MZWFkZXJJbmZvKHt9LHt9LGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VyTGlzdCA9IHJlc3BvbnNlO1xuXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS51c2VyTGlzdCxmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnNjb3JlID0gZGF0YS5oZXJvU2NvcmU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxlYWRlcmJvYXJkUGFnZSA9IHRydWU7XG4gICAgICAgICAgICB9LDEwMDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vICRzY29wZS52b3RlUGFnZUFjdGlvbigpOyAvL3RtcFxuXG5cblxuICAgIH0pOyJdfQ==
